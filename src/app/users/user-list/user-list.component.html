<!-- src/app/users/user-list/user-list.component.html -->
<!-- üë• GESTI√ìN DE USUARIOS - TEMPLATE PREMIUM FINZENAPP -->
<div class="user-management-container">
  
  <!-- üîô NAVEGACI√ìN ATR√ÅS -->
  <div class="back-navigation">
    <button mat-button 
            (click)="goBack()" 
            class="back-button">
      <mat-icon>arrow_back</mat-icon>
      <span>Volver al Dashboard</span>
    </button>
  </div>

  <!-- ‚úÖ HEADER CON M√âTRICAS GLOBALES -->
  <div class="metrics-header">
    <div class="page-title-section">
      <div>
        <h1 class="page-title">
          <mat-icon>people</mat-icon>
          Gesti√≥n de Usuarios
        </h1>
        <p class="subtitle">Supervisa y gestiona usuarios de la aplicaci√≥n m√≥vil FitNova</p>
      </div>
    </div>
    
    <!-- üöÄ HEADER ACTIONS -->
    <div class="header-actions">
      <button mat-raised-button
              color="primary"
              (click)="toggleCreateUserForm()"
              *ngIf="currentUser?.role === 'admin' || currentUser?.role === 'trainer'">
        <mat-icon>person_add</mat-icon>
        <span *ngIf="currentUser?.role === 'admin'">Crear Usuario</span>
        <span *ngIf="currentUser?.role === 'trainer'">Registrar Usuario</span>
      </button>

      <button mat-raised-button
              class="trainer-btn"
              (click)="toggleCreateTrainerForm()"
              *ngIf="currentUser?.role === 'admin'">
        <mat-icon>fitness_center</mat-icon>
        <span>Crear Entrenador</span>
      </button>

      <button mat-button (click)="refreshData()">
        <mat-icon>refresh</mat-icon>
        <span>Actualizar</span>
      </button>

      <button mat-button (click)="exportData()">
        <mat-icon>file_download</mat-icon>
        <span>Exportar</span>
      </button>
    </div>

    <!-- üìä M√âTRICAS CARDS -->
    <div class="metrics-cards">
      <mat-card class="metric-card primary">
        <mat-card-content>
          <div class="metric-content">
            <mat-icon>group</mat-icon>
            <div class="metric-text">
              <span class="metric-value">{{totalUsers}}</span>
              <span class="metric-label">Total Usuarios</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="metric-card accent">
        <mat-card-content>
          <div class="metric-content">
            <mat-icon>flash_on</mat-icon>
            <div class="metric-text">
              <span class="metric-value">{{activeUsersToday}}</span>
              <span class="metric-label">Activos Hoy</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="metric-card warn">
        <mat-card-content>
          <div class="metric-content">
            <mat-icon>trending_up</mat-icon>
            <div class="metric-text">
              <span class="metric-value">{{newUsersThisMonth}}</span>
              <span class="metric-label">Nuevos Este Mes</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="metric-card primary">
        <mat-card-content>
          <div class="metric-content">
            <mat-icon>fitness_center</mat-icon>
            <div class="metric-text">
              <span class="metric-value">{{totalWorkoutsCompleted}}</span>
              <span class="metric-label">Entrenamientos</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- üéõÔ∏è CONTROLES Y FILTROS -->
  <mat-card class="controls-card">
    <mat-card-content>
      <div class="controls-section">
        <div class="search-actions">
          <mat-form-field class="search-field" appearance="outline">
            <mat-label>Buscar usuarios</mat-label>
            <input matInput 
                   [(ngModel)]="searchTerm" 
                   (input)="applySearch()"
                   placeholder="Buscar por nombre, email o ID...">
            <mat-icon matPrefix>search</mat-icon>
            <button matSuffix 
                    mat-icon-button 
                    (click)="clearSearch()" 
                    *ngIf="searchTerm"
                    aria-label="Limpiar b√∫squeda">
              <mat-icon>close</mat-icon>
            </button>
          </mat-form-field>
          
          <div class="action-buttons">
            <button mat-button (click)="toggleAdvancedFilters()">
              <mat-icon>filter_list</mat-icon>
              <span>Filtros</span>
            </button>
            
            <button mat-button 
                    (click)="clearAllFilters()"
                    [disabled]="!hasActiveFilters()">
              <mat-icon>clear_all</mat-icon>
              <span>Limpiar</span>
            </button>
          </div>
        </div>
        
        <!-- Filtros Avanzados -->
        <div class="advanced-filters" *ngIf="showAdvancedFilters">
          <mat-form-field appearance="outline">
            <mat-label>Estado</mat-label>
            <mat-select [(ngModel)]="statusFilter" (selectionChange)="applyFilters()">
              <mat-option value="">Todos</mat-option>
              <mat-option value="active">Activos</mat-option>
              <mat-option value="inactive">Inactivos</mat-option>
              <mat-option value="blocked">Bloqueados</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" *ngIf="currentUser?.role === 'admin'">
            <mat-label>Entrenador</mat-label>
            <mat-select [(ngModel)]="trainerFilter" (selectionChange)="applyFilters()">
              <mat-option value="">Todos</mat-option>
              <mat-option value="unassigned">Sin asignar</mat-option>
              <mat-option *ngFor="let trainer of availableTrainers" 
                         [value]="trainer.uid">
                {{trainer.displayName}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Desde</mat-label>
            <input matInput 
                   [matDatepicker]="startPicker" 
                   [(ngModel)]="dateRangeStart"
                   (dateChange)="applyFilters()">
            <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
            <mat-datepicker #startPicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Hasta</mat-label>
            <input matInput 
                   [matDatepicker]="endPicker" 
                   [(ngModel)]="dateRangeEnd"
                   (dateChange)="applyFilters()">
            <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
            <mat-datepicker #endPicker></mat-datepicker>
          </mat-form-field>

          <button mat-button (click)="resetDateFilters()">
            <mat-icon>date_range</mat-icon>
            <span>Resetear fechas</span>
          </button>
        </div>
      </div>
    </mat-card-content>
  </mat-card>

  <!-- üìã TABLA DE USUARIOS -->
  <mat-card class="table-card">
    <!-- Loading State -->
    <div class="loading-container" *ngIf="isLoading">
      <mat-spinner diameter="50"></mat-spinner>
    </div>

    <!-- Contenido de la tabla -->
    <div *ngIf="!isLoading">
      <!-- Estado vac√≠o -->
      <div class="empty-state" *ngIf="dataSource.data.length === 0 && !isLoading">
        <mat-icon class="empty-icon">people_outline</mat-icon>
        <h3>No hay usuarios disponibles</h3>
        <p *ngIf="!hasActiveFilters()">
          A√∫n no tienes usuarios registrados en tu aplicaci√≥n. 
          ¬°Comienza creando el primer usuario!
        </p>
        <p *ngIf="hasActiveFilters()">
          No se encontraron usuarios que coincidan con los filtros aplicados. 
          Intenta ajustar los criterios de b√∫squeda.
        </p>
        <button mat-raised-button 
                color="primary"
                (click)="toggleCreateUserForm()"
                *ngIf="!hasActiveFilters() && (currentUser?.role === 'admin' || currentUser?.role === 'trainer')">
          <mat-icon>person_add</mat-icon>
          Crear Primer Usuario
        </button>
        <button mat-button 
                (click)="clearAllFilters()"
                *ngIf="hasActiveFilters()">
          <mat-icon>clear_all</mat-icon>
          Limpiar Filtros
        </button>
      </div>

      <!-- Tabla de usuarios -->
      <div class="table-container" *ngIf="dataSource.data.length > 0">
        <table mat-table 
               [dataSource]="dataSource" 
               matSort 
               class="users-table">

          <!-- Columna: Informaci√≥n del Usuario -->
          <ng-container matColumnDef="userInfo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="displayName">
              Usuario
            </th>
            <td mat-cell *matCellDef="let user" class="user-info-cell">
              <div class="user-info">
                <div class="user-avatar">
                  {{getUserInitials(user.displayName)}}
                </div>
                <div class="user-details">
                  <div class="user-name">{{user.displayName}}</div>
                  <div class="user-email">{{user.email}}</div>
                </div>
              </div>
            </td>
          </ng-container>

          <!-- Columna: Estado -->
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="status">
              Estado
            </th>
            <td mat-cell *matCellDef="let user" class="status-cell">
              <div class="status-chip" 
                   [ngClass]="{
                     'status-active': user.statusColor === 'primary' || user.statusColor === 'accent',
                     'status-inactive': user.statusColor === 'warn' || user.statusText.includes('Inactivo'),
                     'status-blocked': user.status === 'blocked'
                   }">
                <div class="status-dot"></div>
                <span>{{user.statusText}}</span>
              </div>
            </td>
          </ng-container>

          <!-- Columna: √öltima Actividad -->
          <ng-container matColumnDef="lastActive">
            <th mat-header-cell *matHeaderCellDef mat-sort-header="lastActiveAt">
              √öltima Actividad
            </th>
            <td mat-cell *matCellDef="let user">
              <div class="last-active-info">
                <span class="activity-date">{{user.lastActiveText}}</span>
                <span class="activity-details" *ngIf="user.totalWorkouts > 0">
                  {{user.totalWorkouts}} entrenamientos
                </span>
              </div>
            </td>
          </ng-container>

          <!-- Columna: Estad√≠sticas -->
          <ng-container matColumnDef="stats">
            <th mat-header-cell *matHeaderCellDef>
              Estad√≠sticas
            </th>
            <td mat-cell *matCellDef="let user">
              <div class="user-stats">
                <div class="stat-item">
                  <mat-icon>fitness_center</mat-icon>
                  <span>{{user.totalWorkouts || 0}}</span>
                </div>
                <div class="stat-item">
                  <mat-icon>schedule</mat-icon>
                  <span>{{formatMinutes(user.totalMinutes || 0)}}</span>
                </div>
                <div class="stat-item" *ngIf="user.avgAccuracy">
                  <mat-icon>target</mat-icon>
                  <span>{{user.avgAccuracy}}%</span>
                </div>
              </div>
            </td>
          </ng-container>

          <!-- Columna: Entrenador Asignado (solo Admin) -->
          <ng-container matColumnDef="assignedTrainer" *ngIf="currentUser?.role === 'admin'">
            <th mat-header-cell *matHeaderCellDef>
              Entrenador
            </th>
            <td mat-cell *matCellDef="let user" class="trainer-cell">
              <mat-form-field appearance="outline" *ngIf="!user.isUpdatingTrainer">
                <mat-select [value]="user.assignedTrainer || ''" 
                           (selectionChange)="updateAssignedTrainer(user, $event.value)"
                           [disabled]="user.isUpdatingTrainer">
                  <mat-option value="">Sin asignar</mat-option>
                  <mat-option *ngFor="let trainer of availableTrainers" 
                             [value]="trainer.uid">
                    {{trainer.displayName}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <div *ngIf="user.isUpdatingTrainer" class="updating-trainer">
                <mat-spinner diameter="24"></mat-spinner>
                <span>Actualizando...</span>
              </div>
              <div class="trainer-name" *ngIf="user.assignedTrainerName && !user.isUpdatingTrainer">
                {{user.assignedTrainerName}}
              </div>
            </td>
          </ng-container>

          <!-- Columna: Acciones -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>
              Acciones
            </th>
            <td mat-cell *matCellDef="let user" class="actions-cell">
              <button mat-raised-button 
                      color="primary"
                      (click)="viewUserDetails(user)"
                      [disabled]="user.isUpdating"
                      class="view-details-button">
                <mat-icon>visibility</mat-icon>
                <span>Ver Detalles</span>
              </button>
            </td>
          </ng-container>

          <!-- Definici√≥n de filas -->
          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row 
              *matRowDef="let user; columns: displayedColumns;" 
              class="user-row"
              [class.inactive-user]="user.status !== 'active'"></tr>
        </table>

        <!-- Paginador -->
        <mat-paginator 
          [pageSizeOptions]="[10, 25, 50, 100]"
          [pageSize]="25"
          showFirstLastButtons
          aria-label="Seleccionar p√°gina de usuarios">
        </mat-paginator>
      </div>
    </div>
  </mat-card>

  <!-- ‚ú® FORMULARIO PREMIUM DE CREAR USUARIO -->
<mat-card *ngIf="showCreateUserForm" class="create-user-form-premium">
  <!-- Header Premium con Icono -->
  <div class="form-header-premium">
    <div class="header-icon">
      <mat-icon>person_add</mat-icon>
    </div>
    <div class="header-text">
      <h2 class="form-title">Crear Nuevo Usuario</h2>
      <p class="form-subtitle">Complete la informaci√≥n del nuevo miembro</p>
    </div>
  </div>
  
  <mat-card-content class="form-content-premium">
    <form [formGroup]="createUserForm" (ngSubmit)="createUser()">
      
      <!-- SECCI√ìN: Informaci√≥n Personal -->
      <div class="form-section">
        <h3 class="section-title">
          <mat-icon>badge</mat-icon>
          Informaci√≥n Personal
        </h3>
        
        <div class="form-grid">
          <!-- Nombre Completo -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Nombre completo</mat-label>
            <mat-icon matPrefix>person</mat-icon>
            <input matInput 
                   formControlName="displayName" 
                   placeholder="Ej: Juan P√©rez Garc√≠a"
                   required>
            <mat-error *ngIf="createUserForm.get('displayName')?.hasError('required')">
              El nombre es requerido
            </mat-error>
            <mat-error *ngIf="createUserForm.get('displayName')?.hasError('minlength')">
              M√≠nimo 2 caracteres
            </mat-error>
          </mat-form-field>

          <!-- Email -->
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Correo electr√≥nico</mat-label>
            <mat-icon matPrefix>email</mat-icon>
            <input matInput 
                   type="email"
                   formControlName="email" 
                   placeholder="usuario@ejemplo.com"
                   required>
            <mat-error *ngIf="createUserForm.get('email')?.hasError('required')">
              El email es requerido
            </mat-error>
            <mat-error *ngIf="createUserForm.get('email')?.hasError('email')">
              Ingresa un email v√°lido
            </mat-error>
          </mat-form-field>

          <!-- ‚úÖ NUEVO: Tel√©fono -->
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Tel√©fono de contacto</mat-label>
            <mat-icon matPrefix>phone</mat-icon>
            <input matInput 
                   type="tel"
                   formControlName="phoneNumber" 
                   placeholder="0987654321"
                   maxlength="10"
                   required>
            <mat-hint>10 d√≠gitos sin espacios</mat-hint>
            <mat-error *ngIf="createUserForm.get('phoneNumber')?.hasError('required')">
              El tel√©fono es requerido
            </mat-error>
            <mat-error *ngIf="createUserForm.get('phoneNumber')?.hasError('pattern')">
              Debe contener exactamente 10 d√≠gitos
            </mat-error>
          </mat-form-field>

          <!-- ‚úÖ NUEVO: G√©nero -->
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>G√©nero</mat-label>
            <mat-icon matPrefix>wc</mat-icon>
            <mat-select formControlName="gender" required>
              <mat-option value="male">
                <mat-icon>male</mat-icon>
                Masculino
              </mat-option>
              <mat-option value="female">
                <mat-icon>female</mat-icon>
                Femenino
              </mat-option>
              <mat-option value="other">
                <mat-icon>transgender</mat-icon>
                Otro
              </mat-option>
              <mat-option value="prefer-not-to-say">
                <mat-icon>help_outline</mat-icon>
                Prefiero no decir
              </mat-option>
            </mat-select>
            <mat-error *ngIf="createUserForm.get('gender')?.hasError('required')">
              Selecciona un g√©nero
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <!-- SECCI√ìN: Credenciales y Asignaci√≥n -->
      <div class="form-section">
        <h3 class="section-title">
          <mat-icon>security</mat-icon>
          Credenciales de Acceso
        </h3>
        
        <div class="form-grid">
          <!-- Contrase√±a Temporal -->
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Contrase√±a temporal</mat-label>
            <mat-icon matPrefix>lock</mat-icon>
            <input matInput 
                   [type]="hidePassword ? 'password' : 'text'"
                   formControlName="password" 
                   placeholder="M√≠nimo 6 caracteres"
                   required>
            <button mat-icon-button 
                    matSuffix 
                    (click)="hidePassword = !hidePassword"
                    type="button"
                    class="toggle-password">
              <mat-icon>{{hidePassword ? 'visibility' : 'visibility_off'}}</mat-icon>
            </button>
            <mat-hint>El usuario podr√° cambiarla despu√©s</mat-hint>
            <mat-error *ngIf="createUserForm.get('password')?.hasError('required')">
              La contrase√±a es requerida
            </mat-error>
            <mat-error *ngIf="createUserForm.get('password')?.hasError('minlength')">
              M√≠nimo 6 caracteres
            </mat-error>
          </mat-form-field>

          <!-- Asignar Entrenador (solo admin) -->
          <mat-form-field appearance="outline" 
                          class="half-width" 
                          *ngIf="currentUser?.role === 'admin'">
            <mat-label>Asignar entrenador</mat-label>
            <mat-icon matPrefix>fitness_center</mat-icon>
            <mat-select formControlName="assignedTrainer">
              <mat-option value="">
                <mat-icon>remove_circle_outline</mat-icon>
                Sin asignar
              </mat-option>
              <mat-option *ngFor="let trainer of availableTrainers" 
                         [value]="trainer.uid">
                <mat-icon>person</mat-icon>
                {{trainer.displayName}}
              </mat-option>
            </mat-select>
            <mat-hint>Opcional: puedes asignarlo despu√©s</mat-hint>
          </mat-form-field>
        </div>
      </div>

      <!-- Info Premium -->
      <div class="info-banner">
        <mat-icon>info</mat-icon>
        <p>Despu√©s de crear el usuario, ser√°s redirigido autom√°ticamente para asignar una membres√≠a.</p>
      </div>
    </form>
  </mat-card-content>
    <mat-card-actions align="end">
      <button mat-button 
              type="button" 
              (click)="cancelCreateUser()">
        Cancelar
      </button>
      
      <button mat-raised-button 
              color="primary"
              [disabled]="createUserForm.invalid || isCreatingUser"
              (click)="createUser()">
        <mat-spinner diameter="20" *ngIf="isCreatingUser"></mat-spinner>
        <span *ngIf="!isCreatingUser">Crear Usuario</span>
        <span *ngIf="isCreatingUser">Creando...</span>
      </button>
    </mat-card-actions>
  </mat-card>

  <!-- ‚ú® FORMULARIO PREMIUM DE CREAR ENTRENADOR -->
  <mat-card *ngIf="showCreateTrainerForm" class="create-user-form-premium">
    <!-- Header Premium con Icono -->
    <div class="form-header-premium">
      <div class="header-icon trainer-icon">
        <mat-icon>fitness_center</mat-icon>
      </div>
      <div class="header-text">
        <h2 class="form-title">Crear Nuevo Entrenador</h2>
        <p class="form-subtitle">Complete la informaci√≥n del nuevo entrenador</p>
      </div>
    </div>

    <mat-card-content class="form-content-premium">
      <form [formGroup]="createTrainerForm" (ngSubmit)="createTrainer()">

        <!-- SECCI√ìN: Informaci√≥n Personal -->
        <div class="form-section">
          <h3 class="section-title">
            <mat-icon>badge</mat-icon>
            Informaci√≥n Personal
          </h3>

          <div class="form-grid">
            <!-- Nombre Completo -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Nombre completo*</mat-label>
              <mat-icon matPrefix>person</mat-icon>
              <input matInput
                     formControlName="displayName"
                     placeholder="Ej: Carlos Rodr√≠guez Mart√≠nez"
                     required>
              <mat-error *ngIf="createTrainerForm.get('displayName')?.hasError('required')">
                El nombre es requerido
              </mat-error>
              <mat-error *ngIf="createTrainerForm.get('displayName')?.hasError('minlength')">
                M√≠nimo 3 caracteres
              </mat-error>
            </mat-form-field>

            <!-- Email -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Correo electr√≥nico*</mat-label>
              <mat-icon matPrefix>email</mat-icon>
              <input matInput
                     type="email"
                     formControlName="email"
                     placeholder="entrenador@fitnova.com"
                     required>
              <mat-error *ngIf="createTrainerForm.get('email')?.hasError('required')">
                El email es requerido
              </mat-error>
              <mat-error *ngIf="createTrainerForm.get('email')?.hasError('email')">
                Ingresa un email v√°lido
              </mat-error>
            </mat-form-field>

            <!-- Tel√©fono -->
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Tel√©fono de contacto*</mat-label>
              <mat-icon matPrefix>phone</mat-icon>
              <input matInput
                     type="tel"
                     formControlName="phoneNumber"
                     placeholder="0987654321"
                     maxlength="10"
                     required>
              <mat-hint>10 d√≠gitos sin espacios (opcional)</mat-hint>
              <mat-error *ngIf="createTrainerForm.get('phoneNumber')?.hasError('required')">
                El tel√©fono es requerido
              </mat-error>
              <mat-error *ngIf="createTrainerForm.get('phoneNumber')?.hasError('pattern')">
                Debe contener exactamente 10 d√≠gitos
              </mat-error>
            </mat-form-field>

            <!-- G√©nero -->
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>G√©nero*</mat-label>
              <mat-icon matPrefix>wc</mat-icon>
              <mat-select formControlName="gender" required>
                <mat-option value="male">
                  <mat-icon>male</mat-icon>
                  Masculino
                </mat-option>
                <mat-option value="female">
                  <mat-icon>female</mat-icon>
                  Femenino
                </mat-option>
                <mat-option value="other">
                  <mat-icon>transgender</mat-icon>
                  Otro
                </mat-option>
                <mat-option value="prefer-not-to-say">
                  <mat-icon>help_outline</mat-icon>
                  Prefiero no decir
                </mat-option>
              </mat-select>
              <mat-error *ngIf="createTrainerForm.get('gender')?.hasError('required')">
                Selecciona un g√©nero
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <!-- SECCI√ìN: Credenciales -->
        <div class="form-section">
          <h3 class="section-title">
            <mat-icon>security</mat-icon>
            Credenciales de Acceso
          </h3>

          <div class="form-grid">
            <!-- Contrase√±a Temporal -->
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Contrase√±a temporal*</mat-label>
              <mat-icon matPrefix>lock</mat-icon>
              <input matInput
                     [type]="hideTrainerPassword ? 'password' : 'text'"
                     formControlName="password"
                     placeholder="M√≠nimo 6 caracteres"
                     required>
              <button mat-icon-button
                      matSuffix
                      (click)="hideTrainerPassword = !hideTrainerPassword"
                      type="button"
                      class="toggle-password">
                <mat-icon>{{hideTrainerPassword ? 'visibility' : 'visibility_off'}}</mat-icon>
              </button>
              <mat-hint>El entrenador podr√° cambiarla despu√©s</mat-hint>
              <mat-error *ngIf="createTrainerForm.get('password')?.hasError('required')">
                La contrase√±a es requerida
              </mat-error>
              <mat-error *ngIf="createTrainerForm.get('password')?.hasError('minlength')">
                M√≠nimo 6 caracteres
              </mat-error>
            </mat-form-field>

            <!-- Especializaci√≥n -->
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Especializaci√≥n</mat-label>
              <mat-icon matPrefix>star</mat-icon>
              <input matInput
                     formControlName="specialization"
                     placeholder="Ej: Entrenamiento funcional, Musculaci√≥n">
              <mat-hint>√Åreas de especialidad del entrenador</mat-hint>
            </mat-form-field>
          </div>
        </div>

        <!-- SECCI√ìN: Informaci√≥n Profesional (Opcional) -->
        <div class="form-section">
          <h3 class="section-title">
            <mat-icon>workspace_premium</mat-icon>
            Informaci√≥n Profesional (Opcional)
          </h3>

          <div class="form-grid">
            <!-- Certificaciones -->
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Certificaciones</mat-label>
              <mat-icon matPrefix>verified</mat-icon>
              <textarea matInput
                        formControlName="certifications"
                        placeholder="Certificaciones y t√≠tulos profesionales"
                        rows="2"></textarea>
            </mat-form-field>

            <!-- A√±os de Experiencia -->
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>A√±os de experiencia</mat-label>
              <mat-icon matPrefix>trending_up</mat-icon>
              <input matInput
                     type="number"
                     formControlName="experience"
                     placeholder="0"
                     min="0"
                     max="50">
              <mat-hint>A√±os de experiencia como entrenador</mat-hint>
            </mat-form-field>

            <!-- Disponibilidad -->
            <mat-form-field appearance="outline" class="half-width">
              <mat-label>Disponibilidad</mat-label>
              <mat-icon matPrefix>schedule</mat-icon>
              <mat-select formControlName="availability">
                <mat-option value="full-time">Tiempo completo</mat-option>
                <mat-option value="part-time">Medio tiempo</mat-option>
                <mat-option value="weekend">Fines de semana</mat-option>
                <mat-option value="flexible">Flexible</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>

        <!-- Info Premium -->
        <div class="info-banner">
          <mat-icon>info</mat-icon>
          <p>El entrenador recibir√° un correo electr√≥nico con un c√≥digo de verificaci√≥n para activar su cuenta. Una vez verificado, podr√° iniciar sesi√≥n y gestionar sus usuarios asignados.</p>
        </div>
      </form>
    </mat-card-content>
    <mat-card-actions align="end">
      <button mat-button
              type="button"
              (click)="cancelCreateTrainer()">
        Cancelar
      </button>

      <button mat-raised-button
              class="trainer-submit-btn"
              [disabled]="createTrainerForm.invalid || isCreatingTrainer"
              (click)="createTrainer()">
        <mat-spinner diameter="20" *ngIf="isCreatingTrainer"></mat-spinner>
        <span *ngIf="!isCreatingTrainer">Crear Entrenador</span>
        <span *ngIf="isCreatingTrainer">Creando...</span>
      </button>
    </mat-card-actions>
  </mat-card>
</div>